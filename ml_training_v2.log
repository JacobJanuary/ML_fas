2025-08-13 03:52:41,541 - __main__ - INFO - ============================================================
2025-08-13 03:52:41,541 - __main__ - INFO - ML MODEL TRAINING V2 - Using ml_training_data_v2
2025-08-13 03:52:41,541 - __main__ - INFO - ============================================================
2025-08-13 03:52:41,541 - __main__ - INFO - 
========================================
2025-08-13 03:52:41,541 - __main__ - INFO - TRAINING BUY MODEL
2025-08-13 03:52:41,541 - __main__ - INFO - ========================================
2025-08-13 03:52:41,542 - __main__ - INFO - 
==================================================
2025-08-13 03:52:41,542 - __main__ - INFO - Training BUY Models
2025-08-13 03:52:41,542 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 03:52:41,542 - __main__ - INFO - ==================================================

2025-08-13 03:52:41,542 - __main__ - INFO - Loading BUY data from ml_training_data_v2...
2025-08-13 03:52:49,018 - __main__ - INFO - Loaded 86720 records for BUY
2025-08-13 03:52:49,019 - __main__ - INFO - Base win rate: 56.9%
2025-08-13 03:52:49,019 - __main__ - INFO - ✅ Win rate 56.9% looks realistic
2025-08-13 03:52:49,019 - __main__ - INFO - Market regime distribution:
2025-08-13 03:52:49,026 - __main__ - INFO -   BEAR: 12682.0 signals, 37.2% win rate
2025-08-13 03:52:49,026 - __main__ - INFO -   BULL: 41177.0 signals, 62.6% win rate
2025-08-13 03:52:49,026 - __main__ - INFO -   NEUTRAL: 32861.0 signals, 57.3% win rate
2025-08-13 03:52:49,119 - __main__ - INFO - Engineered 0 new features
2025-08-13 03:52:49,166 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 03:52:49,166 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 03:52:49,166 - __main__ - INFO - Selected 84 features for training
2025-08-13 03:52:49,166 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 03:52:49,299 - __main__ - INFO - Sample weights distribution:
2025-08-13 03:52:49,300 - __main__ - INFO -   Weight 0.5: 12682 samples (14.6%)
2025-08-13 03:52:49,300 - __main__ - INFO -   Weight 1.0: 32861 samples (37.9%)
2025-08-13 03:52:49,300 - __main__ - INFO -   Weight 1.5: 15390 samples (17.7%)
2025-08-13 03:52:49,300 - __main__ - INFO -   Weight 2.0: 25787 samples (29.7%)
2025-08-13 03:52:49,300 - __main__ - INFO - Temporal split:
2025-08-13 03:52:49,301 - __main__ - INFO -   Train: 60703 samples (52.9% win rate)
2025-08-13 03:52:49,301 - __main__ - INFO -   Val: 13008 samples (85.1% win rate)
2025-08-13 03:52:49,301 - __main__ - INFO -   Test: 13009 samples (47.2% win rate)
2025-08-13 03:52:49,301 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-07 01:45:00+00:00
2025-08-13 03:52:49,301 - __main__ - INFO -   Test period: 2025-08-08 21:45:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 03:52:49,301 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 03:53:06,520 - __main__ - INFO - XGBoost best AUC: 0.6797
2025-08-13 03:53:06,521 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 03:53:17,056 - __main__ - INFO - LightGBM best AUC: 0.6817
2025-08-13 03:53:17,057 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 03:53:33,207 - __main__ - INFO - CatBoost best AUC: 0.6842
2025-08-13 03:53:33,207 - __main__ - INFO - 
Training final models...
2025-08-13 03:53:33,820 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:53:33,842 - __main__ - INFO - 
XGBoost Performance (threshold=0.30):
2025-08-13 03:53:33,842 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 03:53:33,842 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:53:33,842 - __main__ - INFO -   recall: 99.5%
2025-08-13 03:53:33,842 - __main__ - INFO -   f1: 0.6432
2025-08-13 03:53:33,842 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 03:53:33,842 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:53:33,842 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 03:53:33,842 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:53:33,842 - __main__ - INFO -   trades_taken: 98.8% of signals
2025-08-13 03:53:34,552 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:53:34,566 - __main__ - INFO - 
LightGBM Performance (threshold=0.30):
2025-08-13 03:53:34,566 - __main__ - INFO -   roc_auc: 0.5305
2025-08-13 03:53:34,566 - __main__ - INFO -   precision: 47.4%
2025-08-13 03:53:34,566 - __main__ - INFO -   recall: 99.8%
2025-08-13 03:53:34,566 - __main__ - INFO -   f1: 0.6431
2025-08-13 03:53:34,566 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 03:53:34,566 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:53:34,566 - __main__ - INFO -   expected_profit: -0.1534
2025-08-13 03:53:34,566 - __main__ - INFO -   win_rate: 47.4%
2025-08-13 03:53:34,566 - __main__ - INFO -   trades_taken: 99.2% of signals
2025-08-13 03:53:35,353 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:53:35,360 - __main__ - INFO - 
CatBoost Performance (threshold=0.30):
2025-08-13 03:53:35,360 - __main__ - INFO -   roc_auc: 0.5243
2025-08-13 03:53:35,360 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:53:35,360 - __main__ - INFO -   recall: 99.7%
2025-08-13 03:53:35,360 - __main__ - INFO -   f1: 0.6430
2025-08-13 03:53:35,360 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 03:53:35,360 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:53:35,360 - __main__ - INFO -   expected_profit: -0.1527
2025-08-13 03:53:35,360 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:53:35,360 - __main__ - INFO -   trades_taken: 99.1% of signals
2025-08-13 03:53:35,360 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 03:53:35,364 - __main__ - INFO - 
==================================================
2025-08-13 03:53:35,364 - __main__ - INFO - Performance by Market Regime - BUY
2025-08-13 03:53:35,364 - __main__ - INFO - Using threshold: 0.30
2025-08-13 03:53:35,365 - __main__ - INFO - ==================================================
2025-08-13 03:53:35,367 - __main__ - INFO - 
BULL Market:
2025-08-13 03:53:35,367 - __main__ - INFO -   Total samples: 13009
2025-08-13 03:53:35,367 - __main__ - INFO -   Trades taken: 12853 (98.8%)
2025-08-13 03:53:35,367 - __main__ - INFO -   Win rate: 47.5%
2025-08-13 03:53:35,367 - __main__ - INFO -   Expected profit: -14.91%
2025-08-13 03:53:35,367 - __main__ - INFO -   ❌ AVOID - Don't trade BUY in BULL
2025-08-13 03:53:35,402 - __main__ - INFO - Preprocessor saved to models/buy_preprocessor_v2.pkl
2025-08-13 03:53:35,404 - __main__ - INFO - XGBoost model saved to models/buy_xgboost_model_v2.pkl
2025-08-13 03:53:35,406 - __main__ - INFO - LightGBM model saved to models/buy_lightgbm_model_v2.pkl
2025-08-13 03:53:35,413 - __main__ - INFO - CatBoost model saved to models/buy_catboost_model_v2.pkl
2025-08-13 03:53:35,415 - __main__ - INFO - Best model saved to models/buy_best_model_v2.pkl with threshold 0.30
2025-08-13 03:53:35,415 - __main__ - INFO - 
========================================
2025-08-13 03:53:35,415 - __main__ - INFO - TRAINING SELL MODEL
2025-08-13 03:53:35,415 - __main__ - INFO - ========================================
2025-08-13 03:53:35,416 - __main__ - INFO - 
==================================================
2025-08-13 03:53:35,416 - __main__ - INFO - Training SELL Models
2025-08-13 03:53:35,416 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 03:53:35,416 - __main__ - INFO - ==================================================

2025-08-13 03:53:35,416 - __main__ - INFO - Loading SELL data from ml_training_data_v2...
2025-08-13 03:53:44,087 - __main__ - INFO - Loaded 106184 records for SELL
2025-08-13 03:53:44,088 - __main__ - INFO - Base win rate: 44.7%
2025-08-13 03:53:44,088 - __main__ - INFO - ✅ Win rate 44.7% looks realistic
2025-08-13 03:53:44,088 - __main__ - INFO - Market regime distribution:
2025-08-13 03:53:44,095 - __main__ - INFO -   BEAR: 23881.0 signals, 62.3% win rate
2025-08-13 03:53:44,095 - __main__ - INFO -   BULL: 37912.0 signals, 31.5% win rate
2025-08-13 03:53:44,095 - __main__ - INFO -   NEUTRAL: 44391.0 signals, 46.6% win rate
2025-08-13 03:53:44,221 - __main__ - INFO - Engineered 0 new features
2025-08-13 03:53:44,283 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 03:53:44,284 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 03:53:44,284 - __main__ - INFO - Selected 84 features for training
2025-08-13 03:53:44,284 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 03:53:44,435 - __main__ - INFO - Sample weights distribution:
2025-08-13 03:53:44,436 - __main__ - INFO -   Weight 0.5: 37912 samples (35.7%)
2025-08-13 03:53:44,436 - __main__ - INFO -   Weight 1.0: 44391 samples (41.8%)
2025-08-13 03:53:44,436 - __main__ - INFO -   Weight 1.5: 8995 samples (8.5%)
2025-08-13 03:53:44,436 - __main__ - INFO -   Weight 2.0: 14886 samples (14.0%)
2025-08-13 03:53:44,436 - __main__ - INFO - Temporal split:
2025-08-13 03:53:44,436 - __main__ - INFO -   Train: 74328 samples (53.1% win rate)
2025-08-13 03:53:44,436 - __main__ - INFO -   Val: 15927 samples (10.5% win rate)
2025-08-13 03:53:44,436 - __main__ - INFO -   Test: 15929 samples (40.0% win rate)
2025-08-13 03:53:44,437 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-05 18:45:00+00:00
2025-08-13 03:53:44,437 - __main__ - INFO -   Test period: 2025-08-08 12:15:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 03:53:44,437 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 03:53:50,392 - __main__ - INFO - XGBoost best AUC: 0.5356
2025-08-13 03:53:50,393 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 03:53:59,323 - __main__ - INFO - LightGBM best AUC: 0.5462
2025-08-13 03:53:59,323 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 03:54:03,768 - __main__ - INFO - CatBoost best AUC: 0.5036
2025-08-13 03:54:03,768 - __main__ - INFO - 
Training final models...
2025-08-13 03:54:04,003 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 03:54:04,013 - __main__ - INFO - 
XGBoost Performance (threshold=0.50):
2025-08-13 03:54:04,013 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 03:54:04,013 - __main__ - INFO -   precision: 40.0%
2025-08-13 03:54:04,014 - __main__ - INFO -   recall: 100.0%
2025-08-13 03:54:04,014 - __main__ - INFO -   f1: 0.5711
2025-08-13 03:54:04,014 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 03:54:04,014 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:54:04,014 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 03:54:04,014 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 03:54:04,014 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 03:54:04,277 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 03:54:04,285 - __main__ - INFO - 
LightGBM Performance (threshold=0.50):
2025-08-13 03:54:04,285 - __main__ - INFO -   roc_auc: 0.3579
2025-08-13 03:54:04,285 - __main__ - INFO -   precision: 40.0%
2025-08-13 03:54:04,285 - __main__ - INFO -   recall: 100.0%
2025-08-13 03:54:04,285 - __main__ - INFO -   f1: 0.5711
2025-08-13 03:54:04,285 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 03:54:04,285 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:54:04,285 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 03:54:04,285 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 03:54:04,285 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 03:54:04,540 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 03:54:04,546 - __main__ - INFO - 
CatBoost Performance (threshold=0.50):
2025-08-13 03:54:04,546 - __main__ - INFO -   roc_auc: 0.3963
2025-08-13 03:54:04,546 - __main__ - INFO -   precision: 12.1%
2025-08-13 03:54:04,546 - __main__ - INFO -   recall: 7.1%
2025-08-13 03:54:04,546 - __main__ - INFO -   f1: 0.0894
2025-08-13 03:54:04,546 - __main__ - INFO -   accuracy: 42.4%
2025-08-13 03:54:04,546 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:54:04,546 - __main__ - INFO -   expected_profit: -2.2722
2025-08-13 03:54:04,546 - __main__ - INFO -   win_rate: 12.1%
2025-08-13 03:54:04,546 - __main__ - INFO -   trades_taken: 23.3% of signals
2025-08-13 03:54:04,546 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 03:54:04,551 - __main__ - INFO - 
==================================================
2025-08-13 03:54:04,551 - __main__ - INFO - Performance by Market Regime - SELL
2025-08-13 03:54:04,551 - __main__ - INFO - Using threshold: 0.50
2025-08-13 03:54:04,551 - __main__ - INFO - ==================================================
2025-08-13 03:54:04,553 - __main__ - INFO - 
BULL Market:
2025-08-13 03:54:04,553 - __main__ - INFO -   Total samples: 15929
2025-08-13 03:54:04,553 - __main__ - INFO -   Trades taken: 15929 (100.0%)
2025-08-13 03:54:04,553 - __main__ - INFO -   Win rate: 40.0%
2025-08-13 03:54:04,553 - __main__ - INFO -   Expected profit: -60.17%
2025-08-13 03:54:04,553 - __main__ - INFO -   ❌ AVOID - Don't trade SELL in BULL
2025-08-13 03:54:04,611 - __main__ - INFO - Preprocessor saved to models/sell_preprocessor_v2.pkl
2025-08-13 03:54:04,613 - __main__ - INFO - XGBoost model saved to models/sell_xgboost_model_v2.pkl
2025-08-13 03:54:04,613 - __main__ - INFO - LightGBM model saved to models/sell_lightgbm_model_v2.pkl
2025-08-13 03:54:04,621 - __main__ - INFO - CatBoost model saved to models/sell_catboost_model_v2.pkl
2025-08-13 03:54:04,622 - __main__ - INFO - Best model saved to models/sell_best_model_v2.pkl with threshold 0.50
2025-08-13 03:54:04,622 - __main__ - INFO - 
============================================================
2025-08-13 03:54:04,622 - __main__ - INFO - TRAINING COMPLETE - SUMMARY
2025-08-13 03:54:04,622 - __main__ - INFO - ============================================================
2025-08-13 03:54:04,622 - __main__ - INFO - 
📊 BUY Model Performance:
2025-08-13 03:54:04,622 - __main__ - INFO - Best Model: XGBoost
2025-08-13 03:54:04,622 - __main__ - INFO - Optimal Threshold: 0.30
2025-08-13 03:54:04,622 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 03:54:04,622 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:54:04,622 - __main__ - INFO -   recall: 99.5%
2025-08-13 03:54:04,622 - __main__ - INFO -   f1: 0.6432
2025-08-13 03:54:04,622 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 03:54:04,622 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:54:04,622 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 03:54:04,622 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:54:04,622 - __main__ - INFO -   trades_taken: 98.8%
2025-08-13 03:54:04,622 - __main__ - INFO - 
📊 SELL Model Performance:
2025-08-13 03:54:04,622 - __main__ - INFO - Best Model: XGBoost
2025-08-13 03:54:04,622 - __main__ - INFO - Optimal Threshold: 0.50
2025-08-13 03:54:04,622 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 03:54:04,622 - __main__ - INFO -   precision: 40.0%
2025-08-13 03:54:04,622 - __main__ - INFO -   recall: 100.0%
2025-08-13 03:54:04,622 - __main__ - INFO -   f1: 0.5711
2025-08-13 03:54:04,622 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 03:54:04,622 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:54:04,622 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 03:54:04,622 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 03:54:04,622 - __main__ - INFO -   trades_taken: 100.0%
2025-08-13 03:54:04,622 - __main__ - INFO - 
💡 Remember: The goal is to FILTER signals, not predict all of them!
2025-08-13 03:54:04,622 - __main__ - INFO -    Target: 60-70% win rate on 20-30% of signals
2025-08-13 03:55:15,518 - __main__ - INFO - ============================================================
2025-08-13 03:55:15,518 - __main__ - INFO - ML MODEL TRAINING V2 - Using ml_training_data_v2
2025-08-13 03:55:15,518 - __main__ - INFO - ============================================================
2025-08-13 03:55:15,518 - __main__ - INFO - 
========================================
2025-08-13 03:55:15,518 - __main__ - INFO - TRAINING BUY MODEL
2025-08-13 03:55:15,518 - __main__ - INFO - ========================================
2025-08-13 03:55:15,518 - __main__ - INFO - 
==================================================
2025-08-13 03:55:15,518 - __main__ - INFO - Training BUY Models
2025-08-13 03:55:15,518 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 03:55:15,519 - __main__ - INFO - ==================================================

2025-08-13 03:55:15,519 - __main__ - INFO - Loading BUY data from ml_training_data_v2...
2025-08-13 03:55:22,352 - __main__ - INFO - Loaded 86720 records for BUY
2025-08-13 03:55:22,353 - __main__ - INFO - Base win rate: 56.9%
2025-08-13 03:55:22,353 - __main__ - INFO - ✅ Win rate 56.9% looks realistic
2025-08-13 03:55:22,353 - __main__ - INFO - Market regime distribution:
2025-08-13 03:55:22,360 - __main__ - INFO -   BEAR: 12682.0 signals, 37.2% win rate
2025-08-13 03:55:22,360 - __main__ - INFO -   BULL: 41177.0 signals, 62.6% win rate
2025-08-13 03:55:22,360 - __main__ - INFO -   NEUTRAL: 32861.0 signals, 57.3% win rate
2025-08-13 03:55:22,460 - __main__ - INFO - Engineered 0 new features
2025-08-13 03:55:22,509 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 03:55:22,509 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 03:55:22,509 - __main__ - INFO - Selected 84 features for training
2025-08-13 03:55:22,509 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 03:55:22,645 - __main__ - INFO - Sample weights distribution:
2025-08-13 03:55:22,646 - __main__ - INFO -   Weight 0.5: 12682 samples (14.6%)
2025-08-13 03:55:22,647 - __main__ - INFO -   Weight 1.0: 32861 samples (37.9%)
2025-08-13 03:55:22,647 - __main__ - INFO -   Weight 1.5: 15390 samples (17.7%)
2025-08-13 03:55:22,647 - __main__ - INFO -   Weight 2.0: 25787 samples (29.7%)
2025-08-13 03:55:22,647 - __main__ - INFO - Temporal split:
2025-08-13 03:55:22,647 - __main__ - INFO -   Train: 60703 samples (52.9% win rate)
2025-08-13 03:55:22,647 - __main__ - INFO -   Val: 13008 samples (85.1% win rate)
2025-08-13 03:55:22,647 - __main__ - INFO -   Test: 13009 samples (47.2% win rate)
2025-08-13 03:55:22,647 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-07 01:45:00+00:00
2025-08-13 03:55:22,647 - __main__ - INFO -   Test period: 2025-08-08 21:45:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 03:55:22,647 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 03:55:39,685 - __main__ - INFO - XGBoost best AUC: 0.6797
2025-08-13 03:55:39,686 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 03:55:50,120 - __main__ - INFO - LightGBM best AUC: 0.6817
2025-08-13 03:55:50,121 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 03:56:06,943 - __main__ - INFO - CatBoost best AUC: 0.6842
2025-08-13 03:56:06,943 - __main__ - INFO - 
Training final models...
2025-08-13 03:56:07,576 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:56:07,590 - __main__ - INFO - 
XGBoost Performance (threshold=0.30):
2025-08-13 03:56:07,590 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 03:56:07,590 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:56:07,590 - __main__ - INFO -   recall: 99.5%
2025-08-13 03:56:07,590 - __main__ - INFO -   f1: 0.6432
2025-08-13 03:56:07,590 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 03:56:07,590 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:56:07,590 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 03:56:07,590 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:56:07,590 - __main__ - INFO -   trades_taken: 98.8% of signals
2025-08-13 03:56:08,322 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:56:08,335 - __main__ - INFO - 
LightGBM Performance (threshold=0.30):
2025-08-13 03:56:08,335 - __main__ - INFO -   roc_auc: 0.5305
2025-08-13 03:56:08,335 - __main__ - INFO -   precision: 47.4%
2025-08-13 03:56:08,335 - __main__ - INFO -   recall: 99.8%
2025-08-13 03:56:08,335 - __main__ - INFO -   f1: 0.6431
2025-08-13 03:56:08,335 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 03:56:08,335 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:56:08,335 - __main__ - INFO -   expected_profit: -0.1534
2025-08-13 03:56:08,335 - __main__ - INFO -   win_rate: 47.4%
2025-08-13 03:56:08,335 - __main__ - INFO -   trades_taken: 99.2% of signals
2025-08-13 03:56:09,117 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:56:09,124 - __main__ - INFO - 
CatBoost Performance (threshold=0.30):
2025-08-13 03:56:09,124 - __main__ - INFO -   roc_auc: 0.5243
2025-08-13 03:56:09,124 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:56:09,124 - __main__ - INFO -   recall: 99.7%
2025-08-13 03:56:09,124 - __main__ - INFO -   f1: 0.6430
2025-08-13 03:56:09,124 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 03:56:09,124 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:56:09,124 - __main__ - INFO -   expected_profit: -0.1527
2025-08-13 03:56:09,124 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:56:09,124 - __main__ - INFO -   trades_taken: 99.1% of signals
2025-08-13 03:56:09,124 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 03:56:09,129 - __main__ - INFO - 
==================================================
2025-08-13 03:56:09,129 - __main__ - INFO - Performance by Market Regime - BUY
2025-08-13 03:56:09,129 - __main__ - INFO - Using threshold: 0.30
2025-08-13 03:56:09,129 - __main__ - INFO - ==================================================
2025-08-13 03:56:09,131 - __main__ - INFO - 
BULL Market:
2025-08-13 03:56:09,131 - __main__ - INFO -   Total samples: 13009
2025-08-13 03:56:09,131 - __main__ - INFO -   Trades taken: 12853 (98.8%)
2025-08-13 03:56:09,131 - __main__ - INFO -   Win rate: 47.5%
2025-08-13 03:56:09,131 - __main__ - INFO -   Expected profit: -14.91%
2025-08-13 03:56:09,131 - __main__ - INFO -   ❌ AVOID - Don't trade BUY in BULL
2025-08-13 03:56:09,165 - __main__ - INFO - Preprocessor saved to models/buy_preprocessor_v2.pkl
2025-08-13 03:56:09,167 - __main__ - INFO - XGBoost model saved to models/buy_xgboost_model_v2.pkl
2025-08-13 03:56:09,169 - __main__ - INFO - LightGBM model saved to models/buy_lightgbm_model_v2.pkl
2025-08-13 03:56:09,177 - __main__ - INFO - CatBoost model saved to models/buy_catboost_model_v2.pkl
2025-08-13 03:56:09,178 - __main__ - INFO - Best model saved to models/buy_best_model_v2.pkl with threshold 0.30
2025-08-13 03:56:09,178 - __main__ - INFO - 
========================================
2025-08-13 03:56:09,178 - __main__ - INFO - TRAINING SELL MODEL
2025-08-13 03:56:09,178 - __main__ - INFO - ========================================
2025-08-13 03:56:09,179 - __main__ - INFO - 
==================================================
2025-08-13 03:56:09,179 - __main__ - INFO - Training SELL Models
2025-08-13 03:56:09,179 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 03:56:09,179 - __main__ - INFO - ==================================================

2025-08-13 03:56:09,179 - __main__ - INFO - Loading SELL data from ml_training_data_v2...
2025-08-13 03:56:17,347 - __main__ - INFO - Loaded 106184 records for SELL
2025-08-13 03:56:17,348 - __main__ - INFO - Base win rate: 44.7%
2025-08-13 03:56:17,349 - __main__ - INFO - ✅ Win rate 44.7% looks realistic
2025-08-13 03:56:17,349 - __main__ - INFO - Market regime distribution:
2025-08-13 03:56:17,355 - __main__ - INFO -   BEAR: 23881.0 signals, 62.3% win rate
2025-08-13 03:56:17,356 - __main__ - INFO -   BULL: 37912.0 signals, 31.5% win rate
2025-08-13 03:56:17,356 - __main__ - INFO -   NEUTRAL: 44391.0 signals, 46.6% win rate
2025-08-13 03:56:17,517 - __main__ - INFO - Engineered 0 new features
2025-08-13 03:56:17,583 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 03:56:17,583 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 03:56:17,583 - __main__ - INFO - Selected 84 features for training
2025-08-13 03:56:17,583 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 03:56:17,756 - __main__ - INFO - Sample weights distribution:
2025-08-13 03:56:17,757 - __main__ - INFO -   Weight 0.5: 37912 samples (35.7%)
2025-08-13 03:56:17,757 - __main__ - INFO -   Weight 1.0: 44391 samples (41.8%)
2025-08-13 03:56:17,757 - __main__ - INFO -   Weight 1.5: 8995 samples (8.5%)
2025-08-13 03:56:17,757 - __main__ - INFO -   Weight 2.0: 14886 samples (14.0%)
2025-08-13 03:56:17,757 - __main__ - INFO - Temporal split:
2025-08-13 03:56:17,757 - __main__ - INFO -   Train: 74328 samples (53.1% win rate)
2025-08-13 03:56:17,757 - __main__ - INFO -   Val: 15927 samples (10.5% win rate)
2025-08-13 03:56:17,757 - __main__ - INFO -   Test: 15929 samples (40.0% win rate)
2025-08-13 03:56:17,757 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-05 18:45:00+00:00
2025-08-13 03:56:17,757 - __main__ - INFO -   Test period: 2025-08-08 12:15:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 03:56:17,757 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 03:56:24,041 - __main__ - INFO - XGBoost best AUC: 0.5356
2025-08-13 03:56:24,042 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 03:56:33,158 - __main__ - INFO - LightGBM best AUC: 0.5462
2025-08-13 03:56:33,159 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 03:56:38,480 - __main__ - INFO - CatBoost best AUC: 0.5036
2025-08-13 03:56:38,480 - __main__ - INFO - 
Training final models...
2025-08-13 03:56:38,731 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 03:56:38,742 - __main__ - INFO - 
XGBoost Performance (threshold=0.50):
2025-08-13 03:56:38,742 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 03:56:38,742 - __main__ - INFO -   precision: 40.0%
2025-08-13 03:56:38,742 - __main__ - INFO -   recall: 100.0%
2025-08-13 03:56:38,742 - __main__ - INFO -   f1: 0.5711
2025-08-13 03:56:38,742 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 03:56:38,742 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:56:38,742 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 03:56:38,742 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 03:56:38,742 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 03:56:39,011 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 03:56:39,018 - __main__ - INFO - 
LightGBM Performance (threshold=0.50):
2025-08-13 03:56:39,018 - __main__ - INFO -   roc_auc: 0.3579
2025-08-13 03:56:39,018 - __main__ - INFO -   precision: 40.0%
2025-08-13 03:56:39,018 - __main__ - INFO -   recall: 100.0%
2025-08-13 03:56:39,018 - __main__ - INFO -   f1: 0.5711
2025-08-13 03:56:39,018 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 03:56:39,018 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:56:39,018 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 03:56:39,018 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 03:56:39,018 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 03:56:39,283 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 03:56:39,289 - __main__ - INFO - 
CatBoost Performance (threshold=0.50):
2025-08-13 03:56:39,289 - __main__ - INFO -   roc_auc: 0.3963
2025-08-13 03:56:39,289 - __main__ - INFO -   precision: 12.1%
2025-08-13 03:56:39,289 - __main__ - INFO -   recall: 7.1%
2025-08-13 03:56:39,289 - __main__ - INFO -   f1: 0.0894
2025-08-13 03:56:39,289 - __main__ - INFO -   accuracy: 42.4%
2025-08-13 03:56:39,289 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:56:39,289 - __main__ - INFO -   expected_profit: -2.2722
2025-08-13 03:56:39,289 - __main__ - INFO -   win_rate: 12.1%
2025-08-13 03:56:39,289 - __main__ - INFO -   trades_taken: 23.3% of signals
2025-08-13 03:56:39,289 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 03:56:39,292 - __main__ - INFO - 
==================================================
2025-08-13 03:56:39,292 - __main__ - INFO - Performance by Market Regime - SELL
2025-08-13 03:56:39,292 - __main__ - INFO - Using threshold: 0.50
2025-08-13 03:56:39,292 - __main__ - INFO - ==================================================
2025-08-13 03:56:39,292 - __main__ - INFO - 
BULL Market:
2025-08-13 03:56:39,293 - __main__ - INFO -   Total samples: 15929
2025-08-13 03:56:39,293 - __main__ - INFO -   Trades taken: 15929 (100.0%)
2025-08-13 03:56:39,293 - __main__ - INFO -   Win rate: 40.0%
2025-08-13 03:56:39,293 - __main__ - INFO -   Expected profit: -60.17%
2025-08-13 03:56:39,293 - __main__ - INFO -   ❌ AVOID - Don't trade SELL in BULL
2025-08-13 03:56:39,340 - __main__ - INFO - Preprocessor saved to models/sell_preprocessor_v2.pkl
2025-08-13 03:56:39,341 - __main__ - INFO - XGBoost model saved to models/sell_xgboost_model_v2.pkl
2025-08-13 03:56:39,341 - __main__ - INFO - LightGBM model saved to models/sell_lightgbm_model_v2.pkl
2025-08-13 03:56:39,349 - __main__ - INFO - CatBoost model saved to models/sell_catboost_model_v2.pkl
2025-08-13 03:56:39,350 - __main__ - INFO - Best model saved to models/sell_best_model_v2.pkl with threshold 0.50
2025-08-13 03:56:39,350 - __main__ - INFO - 
============================================================
2025-08-13 03:56:39,350 - __main__ - INFO - TRAINING COMPLETE - SUMMARY
2025-08-13 03:56:39,350 - __main__ - INFO - ============================================================
2025-08-13 03:56:39,350 - __main__ - INFO - 
📊 BUY Model Performance:
2025-08-13 03:56:39,350 - __main__ - INFO - Best Model: XGBoost
2025-08-13 03:56:39,350 - __main__ - INFO - Optimal Threshold: 0.30
2025-08-13 03:56:39,350 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 03:56:39,350 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:56:39,350 - __main__ - INFO -   recall: 99.5%
2025-08-13 03:56:39,350 - __main__ - INFO -   f1: 0.6432
2025-08-13 03:56:39,350 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 03:56:39,350 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:56:39,350 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 03:56:39,350 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:56:39,350 - __main__ - INFO -   trades_taken: 98.8%
2025-08-13 03:56:39,350 - __main__ - INFO - 
📊 SELL Model Performance:
2025-08-13 03:56:39,350 - __main__ - INFO - Best Model: XGBoost
2025-08-13 03:56:39,350 - __main__ - INFO - Optimal Threshold: 0.50
2025-08-13 03:56:39,350 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 03:56:39,350 - __main__ - INFO -   precision: 40.0%
2025-08-13 03:56:39,350 - __main__ - INFO -   recall: 100.0%
2025-08-13 03:56:39,350 - __main__ - INFO -   f1: 0.5711
2025-08-13 03:56:39,350 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 03:56:39,350 - __main__ - INFO -   threshold: 0.5000
2025-08-13 03:56:39,350 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 03:56:39,350 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 03:56:39,350 - __main__ - INFO -   trades_taken: 100.0%
2025-08-13 03:56:39,350 - __main__ - INFO - 
💡 Remember: The goal is to FILTER signals, not predict all of them!
2025-08-13 03:56:39,350 - __main__ - INFO -    Target: 60-70% win rate on 20-30% of signals
2025-08-13 03:59:00,553 - __main__ - INFO - ============================================================
2025-08-13 03:59:00,553 - __main__ - INFO - ML MODEL TRAINING V2 - Using ml_training_data_v2
2025-08-13 03:59:00,553 - __main__ - INFO - ============================================================
2025-08-13 03:59:00,553 - __main__ - INFO - 
========================================
2025-08-13 03:59:00,553 - __main__ - INFO - TRAINING BUY MODEL
2025-08-13 03:59:00,553 - __main__ - INFO - ========================================
2025-08-13 03:59:00,554 - __main__ - INFO - 
==================================================
2025-08-13 03:59:00,554 - __main__ - INFO - Training BUY Models
2025-08-13 03:59:00,554 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 03:59:00,554 - __main__ - INFO - ==================================================

2025-08-13 03:59:00,554 - __main__ - INFO - Loading BUY data from ml_training_data_v2...
2025-08-13 03:59:07,449 - __main__ - INFO - Loaded 86720 records for BUY
2025-08-13 03:59:07,449 - __main__ - INFO - Base win rate: 56.9%
2025-08-13 03:59:07,449 - __main__ - INFO - ✅ Win rate 56.9% looks realistic
2025-08-13 03:59:07,449 - __main__ - INFO - Market regime distribution:
2025-08-13 03:59:07,456 - __main__ - INFO -   BEAR: 12682.0 signals, 37.2% win rate
2025-08-13 03:59:07,456 - __main__ - INFO -   BULL: 41177.0 signals, 62.6% win rate
2025-08-13 03:59:07,456 - __main__ - INFO -   NEUTRAL: 32861.0 signals, 57.3% win rate
2025-08-13 03:59:07,555 - __main__ - INFO - Engineered 0 new features
2025-08-13 03:59:07,603 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 03:59:07,603 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 03:59:07,603 - __main__ - INFO - Selected 84 features for training
2025-08-13 03:59:07,603 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 03:59:07,731 - __main__ - INFO - Sample weights distribution:
2025-08-13 03:59:07,732 - __main__ - INFO -   Weight 0.5: 12682 samples (14.6%)
2025-08-13 03:59:07,732 - __main__ - INFO -   Weight 1.0: 32861 samples (37.9%)
2025-08-13 03:59:07,732 - __main__ - INFO -   Weight 1.5: 15390 samples (17.7%)
2025-08-13 03:59:07,732 - __main__ - INFO -   Weight 2.0: 25787 samples (29.7%)
2025-08-13 03:59:07,733 - __main__ - INFO - Temporal split:
2025-08-13 03:59:07,733 - __main__ - INFO -   Train: 60703 samples (52.9% win rate)
2025-08-13 03:59:07,733 - __main__ - INFO -   Val: 13008 samples (85.1% win rate)
2025-08-13 03:59:07,733 - __main__ - INFO -   Test: 13009 samples (47.2% win rate)
2025-08-13 03:59:07,733 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-07 01:45:00+00:00
2025-08-13 03:59:07,733 - __main__ - INFO -   Test period: 2025-08-08 21:45:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 03:59:07,733 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 03:59:24,719 - __main__ - INFO - XGBoost best AUC: 0.6797
2025-08-13 03:59:24,720 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 03:59:35,166 - __main__ - INFO - LightGBM best AUC: 0.6817
2025-08-13 03:59:35,167 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 03:59:51,190 - __main__ - INFO - CatBoost best AUC: 0.6842
2025-08-13 03:59:51,191 - __main__ - INFO - 
Training final models...
2025-08-13 03:59:51,872 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:59:51,883 - __main__ - INFO - 
XGBoost Performance (threshold=0.30):
2025-08-13 03:59:51,883 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 03:59:51,883 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:59:51,883 - __main__ - INFO -   recall: 99.5%
2025-08-13 03:59:51,883 - __main__ - INFO -   f1: 0.6432
2025-08-13 03:59:51,883 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 03:59:51,883 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:59:51,883 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 03:59:51,883 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:59:51,883 - __main__ - INFO -   trades_taken: 98.8% of signals
2025-08-13 03:59:52,595 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:59:52,609 - __main__ - INFO - 
LightGBM Performance (threshold=0.30):
2025-08-13 03:59:52,610 - __main__ - INFO -   roc_auc: 0.5305
2025-08-13 03:59:52,610 - __main__ - INFO -   precision: 47.4%
2025-08-13 03:59:52,610 - __main__ - INFO -   recall: 99.8%
2025-08-13 03:59:52,610 - __main__ - INFO -   f1: 0.6431
2025-08-13 03:59:52,610 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 03:59:52,610 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:59:52,610 - __main__ - INFO -   expected_profit: -0.1534
2025-08-13 03:59:52,610 - __main__ - INFO -   win_rate: 47.4%
2025-08-13 03:59:52,610 - __main__ - INFO -   trades_taken: 99.2% of signals
2025-08-13 03:59:53,393 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 03:59:53,400 - __main__ - INFO - 
CatBoost Performance (threshold=0.30):
2025-08-13 03:59:53,400 - __main__ - INFO -   roc_auc: 0.5243
2025-08-13 03:59:53,400 - __main__ - INFO -   precision: 47.5%
2025-08-13 03:59:53,400 - __main__ - INFO -   recall: 99.7%
2025-08-13 03:59:53,400 - __main__ - INFO -   f1: 0.6430
2025-08-13 03:59:53,400 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 03:59:53,400 - __main__ - INFO -   threshold: 0.3000
2025-08-13 03:59:53,400 - __main__ - INFO -   expected_profit: -0.1527
2025-08-13 03:59:53,400 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 03:59:53,400 - __main__ - INFO -   trades_taken: 99.1% of signals
2025-08-13 03:59:53,400 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 03:59:53,405 - __main__ - INFO - 
==================================================
2025-08-13 03:59:53,405 - __main__ - INFO - Performance by Market Regime - BUY
2025-08-13 03:59:53,405 - __main__ - INFO - Using threshold: 0.30
2025-08-13 03:59:53,405 - __main__ - INFO - ==================================================
2025-08-13 03:59:53,407 - __main__ - INFO - 
BULL Market:
2025-08-13 03:59:53,407 - __main__ - INFO -   Total samples: 13009
2025-08-13 03:59:53,407 - __main__ - INFO -   Trades taken: 12853 (98.8%)
2025-08-13 03:59:53,407 - __main__ - INFO -   Win rate: 47.5%
2025-08-13 03:59:53,407 - __main__ - INFO -   Expected profit: -14.91%
2025-08-13 03:59:53,407 - __main__ - INFO -   ❌ AVOID - Don't trade BUY in BULL
2025-08-13 03:59:53,452 - __main__ - INFO - Preprocessor saved to models/buy_preprocessor_v2.pkl
2025-08-13 03:59:53,453 - __main__ - INFO - XGBoost model saved to models/buy_xgboost_model_v2.pkl
2025-08-13 03:59:53,455 - __main__ - INFO - LightGBM model saved to models/buy_lightgbm_model_v2.pkl
2025-08-13 03:59:53,463 - __main__ - INFO - CatBoost model saved to models/buy_catboost_model_v2.pkl
2025-08-13 03:59:53,464 - __main__ - INFO - Best model saved to models/buy_best_model_v2.pkl with threshold 0.30
2025-08-13 03:59:53,464 - __main__ - INFO - 
========================================
2025-08-13 03:59:53,464 - __main__ - INFO - TRAINING SELL MODEL
2025-08-13 03:59:53,464 - __main__ - INFO - ========================================
2025-08-13 03:59:53,465 - __main__ - INFO - 
==================================================
2025-08-13 03:59:53,465 - __main__ - INFO - Training SELL Models
2025-08-13 03:59:53,465 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 03:59:53,465 - __main__ - INFO - ==================================================

2025-08-13 03:59:53,465 - __main__ - INFO - Loading SELL data from ml_training_data_v2...
2025-08-13 04:00:02,118 - __main__ - INFO - Loaded 106184 records for SELL
2025-08-13 04:00:02,119 - __main__ - INFO - Base win rate: 44.7%
2025-08-13 04:00:02,119 - __main__ - INFO - ✅ Win rate 44.7% looks realistic
2025-08-13 04:00:02,119 - __main__ - INFO - Market regime distribution:
2025-08-13 04:00:02,126 - __main__ - INFO -   BEAR: 23881.0 signals, 62.3% win rate
2025-08-13 04:00:02,126 - __main__ - INFO -   BULL: 37912.0 signals, 31.5% win rate
2025-08-13 04:00:02,126 - __main__ - INFO -   NEUTRAL: 44391.0 signals, 46.6% win rate
2025-08-13 04:00:02,259 - __main__ - INFO - Engineered 0 new features
2025-08-13 04:00:02,323 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 04:00:02,324 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 04:00:02,324 - __main__ - INFO - Selected 84 features for training
2025-08-13 04:00:02,324 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 04:00:02,522 - __main__ - INFO - Sample weights distribution:
2025-08-13 04:00:02,522 - __main__ - INFO -   Weight 0.5: 37912 samples (35.7%)
2025-08-13 04:00:02,522 - __main__ - INFO -   Weight 1.0: 44391 samples (41.8%)
2025-08-13 04:00:02,522 - __main__ - INFO -   Weight 1.5: 8995 samples (8.5%)
2025-08-13 04:00:02,522 - __main__ - INFO -   Weight 2.0: 14886 samples (14.0%)
2025-08-13 04:00:02,522 - __main__ - INFO - Temporal split:
2025-08-13 04:00:02,523 - __main__ - INFO -   Train: 74328 samples (53.1% win rate)
2025-08-13 04:00:02,523 - __main__ - INFO -   Val: 15927 samples (10.5% win rate)
2025-08-13 04:00:02,523 - __main__ - INFO -   Test: 15929 samples (40.0% win rate)
2025-08-13 04:00:02,523 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-05 18:45:00+00:00
2025-08-13 04:00:02,523 - __main__ - INFO -   Test period: 2025-08-08 12:15:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 04:00:02,523 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 04:00:10,197 - __main__ - INFO - XGBoost best AUC: 0.5356
2025-08-13 04:00:10,198 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 04:00:19,094 - __main__ - INFO - LightGBM best AUC: 0.5462
2025-08-13 04:00:19,096 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 04:00:24,154 - __main__ - INFO - CatBoost best AUC: 0.5036
2025-08-13 04:00:24,154 - __main__ - INFO - 
Training final models...
2025-08-13 04:00:24,396 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 04:00:24,407 - __main__ - INFO - 
XGBoost Performance (threshold=0.50):
2025-08-13 04:00:24,407 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 04:00:24,407 - __main__ - INFO -   precision: 40.0%
2025-08-13 04:00:24,407 - __main__ - INFO -   recall: 100.0%
2025-08-13 04:00:24,407 - __main__ - INFO -   f1: 0.5711
2025-08-13 04:00:24,407 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 04:00:24,407 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:00:24,407 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 04:00:24,407 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 04:00:24,407 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 04:00:24,671 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 04:00:24,683 - __main__ - INFO - 
LightGBM Performance (threshold=0.50):
2025-08-13 04:00:24,683 - __main__ - INFO -   roc_auc: 0.3579
2025-08-13 04:00:24,683 - __main__ - INFO -   precision: 40.0%
2025-08-13 04:00:24,683 - __main__ - INFO -   recall: 100.0%
2025-08-13 04:00:24,683 - __main__ - INFO -   f1: 0.5711
2025-08-13 04:00:24,683 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 04:00:24,683 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:00:24,683 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 04:00:24,683 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 04:00:24,683 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 04:00:24,944 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 04:00:24,950 - __main__ - INFO - 
CatBoost Performance (threshold=0.50):
2025-08-13 04:00:24,950 - __main__ - INFO -   roc_auc: 0.3963
2025-08-13 04:00:24,950 - __main__ - INFO -   precision: 12.1%
2025-08-13 04:00:24,950 - __main__ - INFO -   recall: 7.1%
2025-08-13 04:00:24,950 - __main__ - INFO -   f1: 0.0894
2025-08-13 04:00:24,950 - __main__ - INFO -   accuracy: 42.4%
2025-08-13 04:00:24,950 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:00:24,950 - __main__ - INFO -   expected_profit: -2.2722
2025-08-13 04:00:24,950 - __main__ - INFO -   win_rate: 12.1%
2025-08-13 04:00:24,950 - __main__ - INFO -   trades_taken: 23.3% of signals
2025-08-13 04:00:24,950 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 04:00:24,955 - __main__ - INFO - 
==================================================
2025-08-13 04:00:24,955 - __main__ - INFO - Performance by Market Regime - SELL
2025-08-13 04:00:24,955 - __main__ - INFO - Using threshold: 0.50
2025-08-13 04:00:24,955 - __main__ - INFO - ==================================================
2025-08-13 04:00:24,956 - __main__ - INFO - 
BULL Market:
2025-08-13 04:00:24,956 - __main__ - INFO -   Total samples: 15929
2025-08-13 04:00:24,956 - __main__ - INFO -   Trades taken: 15929 (100.0%)
2025-08-13 04:00:24,956 - __main__ - INFO -   Win rate: 40.0%
2025-08-13 04:00:24,956 - __main__ - INFO -   Expected profit: -60.17%
2025-08-13 04:00:24,956 - __main__ - INFO -   ❌ AVOID - Don't trade SELL in BULL
2025-08-13 04:00:25,010 - __main__ - INFO - Preprocessor saved to models/sell_preprocessor_v2.pkl
2025-08-13 04:00:25,012 - __main__ - INFO - XGBoost model saved to models/sell_xgboost_model_v2.pkl
2025-08-13 04:00:25,013 - __main__ - INFO - LightGBM model saved to models/sell_lightgbm_model_v2.pkl
2025-08-13 04:00:25,021 - __main__ - INFO - CatBoost model saved to models/sell_catboost_model_v2.pkl
2025-08-13 04:00:25,021 - __main__ - INFO - Best model saved to models/sell_best_model_v2.pkl with threshold 0.50
2025-08-13 04:00:25,021 - __main__ - INFO - 
============================================================
2025-08-13 04:00:25,021 - __main__ - INFO - TRAINING COMPLETE - SUMMARY
2025-08-13 04:00:25,021 - __main__ - INFO - ============================================================
2025-08-13 04:00:25,021 - __main__ - INFO - 
📊 BUY Model Performance:
2025-08-13 04:00:25,021 - __main__ - INFO - Best Model: XGBoost
2025-08-13 04:00:25,021 - __main__ - INFO - Optimal Threshold: 0.30
2025-08-13 04:00:25,021 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 04:00:25,021 - __main__ - INFO -   precision: 47.5%
2025-08-13 04:00:25,021 - __main__ - INFO -   recall: 99.5%
2025-08-13 04:00:25,021 - __main__ - INFO -   f1: 0.6432
2025-08-13 04:00:25,021 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 04:00:25,021 - __main__ - INFO -   threshold: 0.3000
2025-08-13 04:00:25,021 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 04:00:25,021 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 04:00:25,021 - __main__ - INFO -   trades_taken: 98.8%
2025-08-13 04:00:25,021 - __main__ - INFO - 
📊 SELL Model Performance:
2025-08-13 04:00:25,021 - __main__ - INFO - Best Model: XGBoost
2025-08-13 04:00:25,021 - __main__ - INFO - Optimal Threshold: 0.50
2025-08-13 04:00:25,021 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 04:00:25,021 - __main__ - INFO -   precision: 40.0%
2025-08-13 04:00:25,021 - __main__ - INFO -   recall: 100.0%
2025-08-13 04:00:25,021 - __main__ - INFO -   f1: 0.5711
2025-08-13 04:00:25,021 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 04:00:25,021 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:00:25,021 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 04:00:25,021 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 04:00:25,021 - __main__ - INFO -   trades_taken: 100.0%
2025-08-13 04:00:25,021 - __main__ - INFO - 
💡 Remember: The goal is to FILTER signals, not predict all of them!
2025-08-13 04:00:25,021 - __main__ - INFO -    Target: 60-70% win rate on 20-30% of signals
2025-08-13 04:16:47,595 - __main__ - INFO - ============================================================
2025-08-13 04:16:47,595 - __main__ - INFO - ML MODEL TRAINING V2 - Using ml_training_data_v2
2025-08-13 04:16:47,595 - __main__ - INFO - ============================================================
2025-08-13 04:16:47,595 - __main__ - INFO - 
========================================
2025-08-13 04:16:47,595 - __main__ - INFO - TRAINING BUY MODEL
2025-08-13 04:16:47,595 - __main__ - INFO - ========================================
2025-08-13 04:16:47,596 - __main__ - INFO - 
==================================================
2025-08-13 04:16:47,596 - __main__ - INFO - Training BUY Models
2025-08-13 04:16:47,596 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 04:16:47,596 - __main__ - INFO - ==================================================

2025-08-13 04:16:47,596 - __main__ - INFO - Loading BUY data from ml_training_data_v2...
2025-08-13 04:16:54,690 - __main__ - INFO - Loaded 86720 records for BUY
2025-08-13 04:16:54,690 - __main__ - INFO - Base win rate: 56.9%
2025-08-13 04:16:54,690 - __main__ - INFO - ✅ Win rate 56.9% looks realistic
2025-08-13 04:16:54,690 - __main__ - INFO - Market regime distribution:
2025-08-13 04:16:54,696 - __main__ - INFO -   BEAR: 12682.0 signals, 37.2% win rate
2025-08-13 04:16:54,696 - __main__ - INFO -   BULL: 41177.0 signals, 62.6% win rate
2025-08-13 04:16:54,696 - __main__ - INFO -   NEUTRAL: 32861.0 signals, 57.3% win rate
2025-08-13 04:16:54,793 - __main__ - INFO - Engineered 0 new features
2025-08-13 04:16:54,842 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 04:16:54,842 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 04:16:54,842 - __main__ - INFO - Selected 84 features for training
2025-08-13 04:16:54,842 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 04:16:54,975 - __main__ - INFO - Sample weights distribution:
2025-08-13 04:16:54,975 - __main__ - INFO -   Weight 0.5: 12682 samples (14.6%)
2025-08-13 04:16:54,975 - __main__ - INFO -   Weight 1.0: 32861 samples (37.9%)
2025-08-13 04:16:54,976 - __main__ - INFO -   Weight 1.5: 15390 samples (17.7%)
2025-08-13 04:16:54,976 - __main__ - INFO -   Weight 2.0: 25787 samples (29.7%)
2025-08-13 04:16:54,976 - __main__ - INFO - Temporal split:
2025-08-13 04:16:54,976 - __main__ - INFO -   Train: 60703 samples (52.9% win rate)
2025-08-13 04:16:54,976 - __main__ - INFO -   Val: 13008 samples (85.1% win rate)
2025-08-13 04:16:54,976 - __main__ - INFO -   Test: 13009 samples (47.2% win rate)
2025-08-13 04:16:54,976 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-07 01:45:00+00:00
2025-08-13 04:16:54,976 - __main__ - INFO -   Test period: 2025-08-08 21:45:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 04:16:54,976 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 04:17:12,235 - __main__ - INFO - XGBoost best AUC: 0.6797
2025-08-13 04:17:12,236 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 04:17:23,275 - __main__ - INFO - LightGBM best AUC: 0.6817
2025-08-13 04:17:23,276 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 04:17:42,822 - __main__ - INFO - CatBoost best AUC: 0.6842
2025-08-13 04:17:42,823 - __main__ - INFO - 
Training final models...
2025-08-13 04:17:43,543 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 04:17:43,556 - __main__ - INFO - 
XGBoost Performance (threshold=0.30):
2025-08-13 04:17:43,556 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 04:17:43,556 - __main__ - INFO -   precision: 47.5%
2025-08-13 04:17:43,556 - __main__ - INFO -   recall: 99.5%
2025-08-13 04:17:43,556 - __main__ - INFO -   f1: 0.6432
2025-08-13 04:17:43,556 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 04:17:43,556 - __main__ - INFO -   threshold: 0.3000
2025-08-13 04:17:43,556 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 04:17:43,556 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 04:17:43,556 - __main__ - INFO -   trades_taken: 98.8% of signals
2025-08-13 04:17:44,972 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 04:17:44,987 - __main__ - INFO - 
LightGBM Performance (threshold=0.30):
2025-08-13 04:17:44,987 - __main__ - INFO -   roc_auc: 0.5305
2025-08-13 04:17:44,987 - __main__ - INFO -   precision: 47.4%
2025-08-13 04:17:44,987 - __main__ - INFO -   recall: 99.8%
2025-08-13 04:17:44,987 - __main__ - INFO -   f1: 0.6431
2025-08-13 04:17:44,987 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 04:17:44,987 - __main__ - INFO -   threshold: 0.3000
2025-08-13 04:17:44,987 - __main__ - INFO -   expected_profit: -0.1534
2025-08-13 04:17:44,987 - __main__ - INFO -   win_rate: 47.4%
2025-08-13 04:17:44,987 - __main__ - INFO -   trades_taken: 99.2% of signals
2025-08-13 04:17:48,503 - __main__ - INFO - Optimal threshold found: 0.30
2025-08-13 04:17:48,516 - __main__ - INFO - 
CatBoost Performance (threshold=0.30):
2025-08-13 04:17:48,517 - __main__ - INFO -   roc_auc: 0.5243
2025-08-13 04:17:48,517 - __main__ - INFO -   precision: 47.5%
2025-08-13 04:17:48,517 - __main__ - INFO -   recall: 99.7%
2025-08-13 04:17:48,517 - __main__ - INFO -   f1: 0.6430
2025-08-13 04:17:48,517 - __main__ - INFO -   accuracy: 47.8%
2025-08-13 04:17:48,517 - __main__ - INFO -   threshold: 0.3000
2025-08-13 04:17:48,517 - __main__ - INFO -   expected_profit: -0.1527
2025-08-13 04:17:48,517 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 04:17:48,518 - __main__ - INFO -   trades_taken: 99.1% of signals
2025-08-13 04:17:48,518 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 04:17:48,530 - __main__ - INFO - 
==================================================
2025-08-13 04:17:48,530 - __main__ - INFO - Performance by Market Regime - BUY
2025-08-13 04:17:48,531 - __main__ - INFO - Using threshold: 0.30
2025-08-13 04:17:48,531 - __main__ - INFO - ==================================================
2025-08-13 04:17:48,536 - __main__ - INFO - 
BULL Market:
2025-08-13 04:17:48,536 - __main__ - INFO -   Total samples: 13009
2025-08-13 04:17:48,536 - __main__ - INFO -   Trades taken: 12853 (98.8%)
2025-08-13 04:17:48,536 - __main__ - INFO -   Win rate: 47.5%
2025-08-13 04:17:48,536 - __main__ - INFO -   Expected profit: -14.91%
2025-08-13 04:17:48,536 - __main__ - INFO -   ❌ AVOID - Don't trade BUY in BULL
2025-08-13 04:17:48,585 - __main__ - INFO - Preprocessor saved to models/buy_preprocessor_v2.pkl
2025-08-13 04:17:48,587 - __main__ - INFO - XGBoost model saved to models/buy_xgboost_model_v2.pkl
2025-08-13 04:17:48,591 - __main__ - INFO - LightGBM model saved to models/buy_lightgbm_model_v2.pkl
2025-08-13 04:17:48,599 - __main__ - INFO - CatBoost model saved to models/buy_catboost_model_v2.pkl
2025-08-13 04:17:48,601 - __main__ - INFO - Best model saved to models/buy_best_model_v2.pkl with threshold 0.30
2025-08-13 04:17:48,601 - __main__ - INFO - 
========================================
2025-08-13 04:17:48,601 - __main__ - INFO - TRAINING SELL MODEL
2025-08-13 04:17:48,601 - __main__ - INFO - ========================================
2025-08-13 04:17:48,602 - __main__ - INFO - 
==================================================
2025-08-13 04:17:48,602 - __main__ - INFO - Training SELL Models
2025-08-13 04:17:48,602 - __main__ - INFO - Using ml_training_data_v2
2025-08-13 04:17:48,602 - __main__ - INFO - ==================================================

2025-08-13 04:17:48,602 - __main__ - INFO - Loading SELL data from ml_training_data_v2...
2025-08-13 04:17:57,492 - __main__ - INFO - Loaded 106184 records for SELL
2025-08-13 04:17:57,493 - __main__ - INFO - Base win rate: 44.7%
2025-08-13 04:17:57,493 - __main__ - INFO - ✅ Win rate 44.7% looks realistic
2025-08-13 04:17:57,493 - __main__ - INFO - Market regime distribution:
2025-08-13 04:17:57,499 - __main__ - INFO -   BEAR: 23881.0 signals, 62.3% win rate
2025-08-13 04:17:57,499 - __main__ - INFO -   BULL: 37912.0 signals, 31.5% win rate
2025-08-13 04:17:57,499 - __main__ - INFO -   NEUTRAL: 44391.0 signals, 46.6% win rate
2025-08-13 04:17:57,632 - __main__ - INFO - Engineered 0 new features
2025-08-13 04:17:57,696 - __main__ - INFO - ✅ Excluding 6 meta columns: ['_meta_outcome_time', '_meta_outcome_type', '_meta_max_favorable_move', '_meta_max_adverse_move', '_meta_time_to_outcome_hours', '_meta_created_at']
2025-08-13 04:17:57,696 - __main__ - WARNING - ⚠️ Excluding potentially dangerous columns: ['pattern_complexity']
2025-08-13 04:17:57,696 - __main__ - INFO - Selected 84 features for training
2025-08-13 04:17:57,696 - __main__ - INFO - Sample features: ['indicator_score', 'pattern_score', 'combination_score', 'total_score', 'strength_numeric', 'close_price', 'price_change_pct', 'buy_ratio', 'buy_ratio_weighted', 'normalized_imbalance']
2025-08-13 04:17:57,844 - __main__ - INFO - Sample weights distribution:
2025-08-13 04:17:57,845 - __main__ - INFO -   Weight 0.5: 37912 samples (35.7%)
2025-08-13 04:17:57,845 - __main__ - INFO -   Weight 1.0: 44391 samples (41.8%)
2025-08-13 04:17:57,845 - __main__ - INFO -   Weight 1.5: 8995 samples (8.5%)
2025-08-13 04:17:57,845 - __main__ - INFO -   Weight 2.0: 14886 samples (14.0%)
2025-08-13 04:17:57,845 - __main__ - INFO - Temporal split:
2025-08-13 04:17:57,845 - __main__ - INFO -   Train: 74328 samples (53.1% win rate)
2025-08-13 04:17:57,845 - __main__ - INFO -   Val: 15927 samples (10.5% win rate)
2025-08-13 04:17:57,845 - __main__ - INFO -   Test: 15929 samples (40.0% win rate)
2025-08-13 04:17:57,846 - __main__ - INFO -   Train period: 2025-07-25 16:00:00+00:00 to 2025-08-05 18:45:00+00:00
2025-08-13 04:17:57,846 - __main__ - INFO -   Test period: 2025-08-08 12:15:00+00:00 to 2025-08-10 23:15:00+00:00
2025-08-13 04:17:57,846 - __main__ - INFO - 
Optimizing XGBoost...
2025-08-13 04:18:06,508 - __main__ - INFO - XGBoost best AUC: 0.5356
2025-08-13 04:18:06,509 - __main__ - INFO - 
Optimizing LightGBM...
2025-08-13 04:18:15,130 - __main__ - INFO - LightGBM best AUC: 0.5462
2025-08-13 04:18:15,131 - __main__ - INFO - 
Optimizing CatBoost...
2025-08-13 04:18:19,589 - __main__ - INFO - CatBoost best AUC: 0.5036
2025-08-13 04:18:19,589 - __main__ - INFO - 
Training final models...
2025-08-13 04:18:19,826 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 04:18:19,836 - __main__ - INFO - 
XGBoost Performance (threshold=0.50):
2025-08-13 04:18:19,836 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 04:18:19,836 - __main__ - INFO -   precision: 40.0%
2025-08-13 04:18:19,836 - __main__ - INFO -   recall: 100.0%
2025-08-13 04:18:19,836 - __main__ - INFO -   f1: 0.5711
2025-08-13 04:18:19,836 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 04:18:19,836 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:18:19,836 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 04:18:19,836 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 04:18:19,836 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 04:18:20,081 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 04:18:20,089 - __main__ - INFO - 
LightGBM Performance (threshold=0.50):
2025-08-13 04:18:20,089 - __main__ - INFO -   roc_auc: 0.3579
2025-08-13 04:18:20,089 - __main__ - INFO -   precision: 40.0%
2025-08-13 04:18:20,089 - __main__ - INFO -   recall: 100.0%
2025-08-13 04:18:20,089 - __main__ - INFO -   f1: 0.5711
2025-08-13 04:18:20,089 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 04:18:20,089 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:18:20,089 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 04:18:20,089 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 04:18:20,089 - __main__ - INFO -   trades_taken: 100.0% of signals
2025-08-13 04:18:20,349 - __main__ - INFO - Optimal threshold found: 0.50
2025-08-13 04:18:20,355 - __main__ - INFO - 
CatBoost Performance (threshold=0.50):
2025-08-13 04:18:20,355 - __main__ - INFO -   roc_auc: 0.3963
2025-08-13 04:18:20,355 - __main__ - INFO -   precision: 12.1%
2025-08-13 04:18:20,355 - __main__ - INFO -   recall: 7.1%
2025-08-13 04:18:20,355 - __main__ - INFO -   f1: 0.0894
2025-08-13 04:18:20,355 - __main__ - INFO -   accuracy: 42.4%
2025-08-13 04:18:20,355 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:18:20,355 - __main__ - INFO -   expected_profit: -2.2722
2025-08-13 04:18:20,355 - __main__ - INFO -   win_rate: 12.1%
2025-08-13 04:18:20,355 - __main__ - INFO -   trades_taken: 23.3% of signals
2025-08-13 04:18:20,355 - __main__ - WARNING - No model meets minimum criteria
2025-08-13 04:18:20,358 - __main__ - INFO - 
==================================================
2025-08-13 04:18:20,358 - __main__ - INFO - Performance by Market Regime - SELL
2025-08-13 04:18:20,358 - __main__ - INFO - Using threshold: 0.50
2025-08-13 04:18:20,358 - __main__ - INFO - ==================================================
2025-08-13 04:18:20,359 - __main__ - INFO - 
BULL Market:
2025-08-13 04:18:20,359 - __main__ - INFO -   Total samples: 15929
2025-08-13 04:18:20,359 - __main__ - INFO -   Trades taken: 15929 (100.0%)
2025-08-13 04:18:20,359 - __main__ - INFO -   Win rate: 40.0%
2025-08-13 04:18:20,359 - __main__ - INFO -   Expected profit: -60.17%
2025-08-13 04:18:20,359 - __main__ - INFO -   ❌ AVOID - Don't trade SELL in BULL
2025-08-13 04:18:20,406 - __main__ - INFO - Preprocessor saved to models/sell_preprocessor_v2.pkl
2025-08-13 04:18:20,408 - __main__ - INFO - XGBoost model saved to models/sell_xgboost_model_v2.pkl
2025-08-13 04:18:20,409 - __main__ - INFO - LightGBM model saved to models/sell_lightgbm_model_v2.pkl
2025-08-13 04:18:20,416 - __main__ - INFO - CatBoost model saved to models/sell_catboost_model_v2.pkl
2025-08-13 04:18:20,417 - __main__ - INFO - Best model saved to models/sell_best_model_v2.pkl with threshold 0.50
2025-08-13 04:18:20,417 - __main__ - INFO - 
============================================================
2025-08-13 04:18:20,417 - __main__ - INFO - TRAINING COMPLETE - SUMMARY
2025-08-13 04:18:20,417 - __main__ - INFO - ============================================================
2025-08-13 04:18:20,417 - __main__ - INFO - 
📊 BUY Model Performance:
2025-08-13 04:18:20,417 - __main__ - INFO - Best Model: XGBoost
2025-08-13 04:18:20,417 - __main__ - INFO - Optimal Threshold: 0.30
2025-08-13 04:18:20,417 - __main__ - INFO -   roc_auc: 0.5307
2025-08-13 04:18:20,417 - __main__ - INFO -   precision: 47.5%
2025-08-13 04:18:20,417 - __main__ - INFO -   recall: 99.5%
2025-08-13 04:18:20,417 - __main__ - INFO -   f1: 0.6432
2025-08-13 04:18:20,417 - __main__ - INFO -   accuracy: 47.9%
2025-08-13 04:18:20,417 - __main__ - INFO -   threshold: 0.3000
2025-08-13 04:18:20,417 - __main__ - INFO -   expected_profit: -0.1491
2025-08-13 04:18:20,417 - __main__ - INFO -   win_rate: 47.5%
2025-08-13 04:18:20,417 - __main__ - INFO -   trades_taken: 98.8%
2025-08-13 04:18:20,417 - __main__ - INFO - 
📊 SELL Model Performance:
2025-08-13 04:18:20,417 - __main__ - INFO - Best Model: XGBoost
2025-08-13 04:18:20,417 - __main__ - INFO - Optimal Threshold: 0.50
2025-08-13 04:18:20,417 - __main__ - INFO -   roc_auc: 0.3613
2025-08-13 04:18:20,417 - __main__ - INFO -   precision: 40.0%
2025-08-13 04:18:20,417 - __main__ - INFO -   recall: 100.0%
2025-08-13 04:18:20,417 - __main__ - INFO -   f1: 0.5711
2025-08-13 04:18:20,417 - __main__ - INFO -   accuracy: 40.0%
2025-08-13 04:18:20,417 - __main__ - INFO -   threshold: 0.5000
2025-08-13 04:18:20,417 - __main__ - INFO -   expected_profit: -0.6017
2025-08-13 04:18:20,417 - __main__ - INFO -   win_rate: 40.0%
2025-08-13 04:18:20,417 - __main__ - INFO -   trades_taken: 100.0%
2025-08-13 04:18:20,417 - __main__ - INFO - 
💡 Remember: The goal is to FILTER signals, not predict all of them!
2025-08-13 04:18:20,417 - __main__ - INFO -    Target: 60-70% win rate on 20-30% of signals
